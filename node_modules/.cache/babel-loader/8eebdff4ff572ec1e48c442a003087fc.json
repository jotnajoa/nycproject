{"remainingRequest":"/Users/soonkpaik/Desktop/NYC Project/code/node_modules/babel-loader/lib/index.js!/Users/soonkpaik/Desktop/NYC Project/code/node_modules/vue-loader-v16/dist/templateLoader.js??ref--6!/Users/soonkpaik/Desktop/NYC Project/code/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/soonkpaik/Desktop/NYC Project/code/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/soonkpaik/Desktop/NYC Project/code/src/components/UI/LineGraph.vue?vue&type=template&id=0a22086f","dependencies":[{"path":"/Users/soonkpaik/Desktop/NYC Project/code/src/components/UI/LineGraph.vue","mtime":1624588433725},{"path":"/Users/soonkpaik/Desktop/NYC Project/code/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/soonkpaik/Desktop/NYC Project/code/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/soonkpaik/Desktop/NYC Project/code/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":1616796459000},{"path":"/Users/soonkpaik/Desktop/NYC Project/code/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/soonkpaik/Desktop/NYC Project/code/node_modules/vue-loader-v16/dist/index.js","mtime":1616796459000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgY3JlYXRlQ29tbWVudFZOb2RlIGFzIF9jcmVhdGVDb21tZW50Vk5vZGUsIGNyZWF0ZVZOb2RlIGFzIF9jcmVhdGVWTm9kZSwgb3BlbkJsb2NrIGFzIF9vcGVuQmxvY2ssIGNyZWF0ZUJsb2NrIGFzIF9jcmVhdGVCbG9jayB9IGZyb20gInZ1ZSI7CmV4cG9ydCBmdW5jdGlvbiByZW5kZXIoX2N0eCwgX2NhY2hlLCAkcHJvcHMsICRzZXR1cCwgJGRhdGEsICRvcHRpb25zKSB7CiAgcmV0dXJuIF9vcGVuQmxvY2soKSwgX2NyZWF0ZUJsb2NrKCJkaXYiLCBudWxsLCBbJGRhdGEueE1heCA/IChfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jaygic3ZnIiwgewogICAga2V5OiAwLAogICAgaWQ6ICJsaW5lLWNoYXJ0IiwKICAgIGhlaWdodDogJHByb3BzLmhlaWdodCwKICAgIHdpZHRoOiAkcHJvcHMud2lkdGgKICB9LCBbX2NyZWF0ZUNvbW1lbnRWTm9kZSgiIDxwYXRoIHYtZm9yPScoZGF0YSxpbmRleCkgb2YgZGF0YUdyb3VwJyA6a2V5PSdpbmRleCcgY2xhc3M9J2xpbmUnPjwvcGF0aD4gIiksIF9jcmVhdGVDb21tZW50Vk5vZGUoIiBvciBJIGNhbiBjcmVhdGUgdGhlbSBpbiBzY3JpcHQgIiksIF9jcmVhdGVWTm9kZSgiZyIsIHsKICAgIGNsYXNzOiAiYXhpcyB4LWF4aXMiLAogICAgdHJhbnNmb3JtOiAidHJhbnNsYXRlKCIuY29uY2F0KDAsICIsIiwgJHByb3BzLmhlaWdodCAtICRwcm9wcy5tYXJnaW4udmVydGljYWwsICIpIikKICB9LCBudWxsLCA4CiAgLyogUFJPUFMgKi8KICAsIFsidHJhbnNmb3JtIl0pLCBfY3JlYXRlVk5vZGUoImciLCB7CiAgICBjbGFzczogImF4aXMgeS1heGlzIiwKICAgIHRyYW5zZm9ybTogInRyYW5zbGF0ZSgiLmNvbmNhdCgkcHJvcHMubWFyZ2luLmhvcml6b250YWwsICIsMCkiKQogIH0sIG51bGwsIDgKICAvKiBQUk9QUyAqLwogICwgWyJ0cmFuc2Zvcm0iXSksIF9jcmVhdGVDb21tZW50Vk5vZGUoIiDqsrDqta3sl5DripQgcGF0aCDrj4Qgdi1mb3LroZwg7Jeu7Ja067SQ7JW87ZWoICIpXSwgOAogIC8qIFBST1BTICovCiAgLCBbImhlaWdodCIsICJ3aWR0aCJdKSkgOiBfY3JlYXRlQ29tbWVudFZOb2RlKCJ2LWlmIiwgdHJ1ZSldKTsKfQ=="},{"version":3,"sources":["/Users/soonkpaik/Desktop/NYC Project/code/src/components/UI/LineGraph.vue"],"names":[],"mappings":";;uBACI,YAAA,CAYM,KAZN,EAYM,IAZN,EAYM,CAVI,KAAA,CAAA,I,kBADN,YAAA,CAUM,KAVN,EAUM;UAAA;AARN,IAAA,EAAE,EAAC,YAQG;AARW,IAAA,MAAM,EAAE,MAAA,CAAA,MAQnB;AAR4B,IAAA,KAAK,EAAE,MAAA,CAAA;AAQnC,GAVN,E,CAII,mBAAA,CAAA,6EAAA,C,EACA,mBAAA,CAAA,kCAAA,C,EACA,YAAA,CAAoF,GAApF,EAAoF;AAAjF,IAAA,KAAK,EAAC,aAA2E;AAA5D,IAAA,SAAS,sBAAA,CAAA,OAAoB,MAAA,CAAA,MAAA,GAAO,MAAA,CAAA,MAAA,CAAO,QAAlC;AAAmD,GAApF,E,IAAA,E;;AAAA,I,aAAA,C,EACA,YAAA,CAA4E,GAA5E,EAA4E;AAAzE,IAAA,KAAK,EAAC,aAAmE;AAApD,IAAA,SAAS,sBAAe,MAAA,CAAA,MAAA,CAAO,UAAtB;AAA2C,GAA5E,E,IAAA,E;;AAAA,I,aAAA,C,EAEZ,mBAAA,CAAA,4BAAA,C,CATQ,E;;AAAA,I,mBAAA,C,qCAWE,CAZN,C","sourcesContent":["<template>\n    <div>\n        <svg \n        v-if='xMax'\n        id='line-chart' :height='height' :width='width'>\n\n            <!-- <path v-for='(data,index) of dataGroup' :key='index' class='line'></path> -->\n            <!-- or I can create them in script -->\n            <g class='axis x-axis' :transform='`translate(${0},${height-margin.vertical})`'></g>\n            <g class='axis y-axis' :transform='`translate(${margin.horizontal},0)`'></g>\n\n<!-- 결국에는 path 도 v-for로 엮어봐야함 -->\n        </svg>\n    </div>\n</template>\n\n<script>\nimport * as d3 from 'd3'\nexport default {\n    props:['width','height','margin','dataGroup','xAxisName','yAxisName','lineColors'],\n    data(){\n        return{\n            xAxis:undefined,\n            yAxis:undefined,\n            xMax:0,yMax:0,xMin:0,yMin:0,\n            xScale:undefined,yScale:undefined\n        }\n\n    },\n    computed:{\n        graphData(){\n            var cloned= [...this.dataGroup]\n            return cloned.sort((a,b)=>d3.ascending(a[this.xAxisName],b[this.xAxisName]))\n        }\n    },\n    methods:{\n        addLabel(){\n            d3.select('svg').append('text').classed('x-label',true)\n            .attr('transform',`translate(${this.width-this.margin.horizontal*1.5},${this.height-this.margin.vertical})`)\n            .text('cost').style('fill','#F1F5FB').style('font-size','10px')\n\n\n            d3.select('svg').append('text').classed('y-label',true)\n            .attr('transform',`translate(${0},${this.margin.vertical/2})`)\n            .text(this.yAxisName).style('fill','#F1F5FB').style('font-size','10px')\n        },\n        defineDataKeys(){\n            console.log('datagroup was not loaded?',this.dataGroup)\n            // this.xAxisName=Object.keys(this.dataGroup[0][0])[0];\n            // this.yAxisName=Object.keys(this.dataGroup[0][0])[1];\n        },\n        // \n        createAxis(){\n\n            var xExtents =[] ;\n            \n            this.graphData.forEach((d)=>{\n                var subArr = d;\n                var extents = subArr.map(t=>t[this.xAxisName]);\n                xExtents.push(extents)\n            })\n\n            var maxXvals =[];\n\n            xExtents.forEach((t)=>{\n                maxXvals.push(d3.max(t))\n            });\n            \n            var yExtents = [];\n            \n            this.graphData.forEach((d)=>{\n                var subArr = d;\n                var extents = subArr.map(t=>t[this.yAxisName]);\n                yExtents.push(extents)\n            })\n\n            var maxYvals=[];\n            yExtents.forEach((t)=>{\n                maxYvals.push(d3.max(t))\n            });\n\n            this.xMax= d3.max(maxXvals);\n            this.yMax= d3.max(maxYvals);\n\n            console.log(this.xMax,this.yMax)\n\n            this.xScale = d3.scaleLinear().domain([this.xMin,this.xMax]).range([this.margin.horizontal,this.width-this.margin.horizontal*2])\n            this.yScale = d3.scaleLinear().domain([this.yMin,this.yMax]).range([this.height-this.margin.vertical,this.margin.vertical]);\n            \n            const xAxis = d3.axisBottom(this.xScale);\n            const yAxis = d3.axisLeft(this.yScale);\n\n            d3.select('.x-axis').transition().duration(1000).call(xAxis.tickSize(0))\n            d3.select('.y-axis').transition().duration(1000).call(yAxis.tickSize(-this.width+this.margin.horizontal*2).ticks(10))\n            d3.select('.y-axis > .domain').remove()\n            d3.selectAll('.y-axis > .tick > line').style('stroke-width',0.5).style('opacity',0.2).style(\"stroke-dasharray\", (\"2, 2\"))\n            d3.select('.x-axis').style('color','#F1F5FB')\n            d3.select('.y-axis').style('color','#F1F5FB')\n            d3.selectAll('.domain').style('stroke-width',0.5)\n        },\n        line(){\n            return d3.line()\n            .x(d=>this.xScale(d[this.xAxisName]))\n            .y(d=>this.yScale(d[this.yAxisName]))\n        },\n        drawLines(linedata,index){\n            // this line function will interate graphData and plot line graphs one by one\n            if(index==0){\n\n            var path = d3.select('#line-chart')\n            .append('path')\n            .attr('class','graph-line')\n            .classed(`${index}-line`,true)\n            .attr('d',this.line()(linedata))\n            .attr('stroke',this.lineColors[index])\n            .attr('stroke-width',1)\n            .attr('fill','none')\n            .style('opacity',0)\n\n            if(path.node()){\n            var pathLength = path.node().getTotalLength();\n            console.log(pathLength)\n\n            path.attr('stroke-dasharray',pathLength)\n            .attr('stroke-dashoffset',pathLength)\n            .transition()\n            .duration(1000)\n            .attr('stroke-dashoffset',0)\n            .style('opacity',1)\n            }\n            \n            }else{\n            d3.select('#line-chart')\n            .append('path')\n            .attr('class','graph-line')\n            .classed(`${index}-line`,true)\n            .attr('d',this.line()(linedata))\n            .attr('stroke',this.lineColors[index])\n            .attr('stroke-width',1)\n            .attr('fill','none')\n            }\n            this.addLabel()\n\n        },\n        clearLines(){\n            d3.selectAll('.graph-line').remove()\n        }\n    },\n    created(){\n\n        const unwatch = this.$watch(\n            ()=>this.dataGroup,\n            data =>{\n                if(data){\n                    this.defineDataKeys();\n                    this.createAxis();\n                    \n                    this.graphData.forEach((d,i)=>{\n                        this.drawLines(d,i)\n                    })\n                    \n                    unwatch()\n                }\n            }\n        )\n\n    },\n    updated(){\n\n        this.createAxis();\n        this.clearLines();\n        this.graphData.forEach((d,i)=>{\n            this.drawLines(d,i)\n        })\n\n    }\n}\n</script>\n<style>\n\n</style>"],"sourceRoot":""}]}